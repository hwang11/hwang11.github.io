---
title: 운영체제 6장 교착상태
description: 운영체제 6장 교착상태
categories:
 - 운영체제
tags:
---  
## 교착상태  
### 교착상태의 개요
#### 교착 상태의 정의
##### 교착상태  
:2개 이상의 프로세스가 다른 프로세스의 작업이 끝나기만 기다리며 작업을 더 이상 진행하지 못하는 상태  
##### 아사현상  
:운영체제가 잘못된 정책을 사용하여 특정 프로세스의 작업이 계속 지연되는 문제   

#### 교착상태의 발생  
컴퓨터 시스템에서 교착 상태는 시스템 자원, 공유 변수, 응용 프로그램 등을 사용할 때 발생할 수 있다.  

#### 자원할당 그래프  
프로세스가 어떤 자원을 사용 중이고 어떤 자원을 기다리고 있는지를 방향성이 있는 그래프로 표현한 것   

<br>
<br>

### 교착상태 필요조건  
#### 교착상태 필요조건  
* __상호배제__  
: 한 프로세스가 사용하는 자원은 다른 프로세스와 공유 할 수 없는 배타적인 자원이어야한다.  

* __비선점__  
: 한 프로세스가 사용중인 자원은 중간에 다른 프로세스가 빼앗을 수 없는 비선점 자원이어야한다.
* __점유와 대기__  
: 어떤 프로세스가 자원을 할당받은 상태에서 다른 자원을 기다리는 상태여야한다.
* __원형 대기__  
: 점유와 대기를 하는 프로세스 간의 관계가 원을 이루어야 한다.

4가지 조건 중 단하나라도 충족하지 않으면 발생하지 않는다.  

### 교착상태 해결방법  
#### 교착상태 해결방법  

해결방법 | 특징  
--|--
교착 상태 예방 | 교착 상태 유발하는 네 가지 조건을 무력화한다.  
교착 상태 회피 | 교착 상태가 발생하지 않는 수준으로 자원을 할당한다.  
교착 상태 검출 | 자원 할당 그래프를 이용하여 교착상태를 발견한다.  
교착 상태 회복 | 교착 상태를 검출 한 후 해결한다  

#### 교착 상태 예방  
##### 상호 배제 예방  
독점적으로 사용할 수 있는 자원을 없애는 방법  

-> 자원을 모두 공유함으로서 예금문제, 프린트문제 처럼 뒤엉키게 됨.  

##### 비선점 예방  
모든 자원을 빼앗을 수 있게 만드는 방법  

-> 임계구역을 보호하기 위해 잠금을 사용하면 자원을 빼앗을 수 없을 뿐만 아니라 상호보장도 어려움  
##### 점유와 대기 예방  
프로세스가 자원을 점유한 상태에서 다른 자원을 기다리지 못하게 하는 방법이다  
전부 할당하거나 아니면 아예 할당하지 않는 방식  
프로세스의 자원 사용 방식을 변화시켜 교착 상태를 처리한다는 점에서 의미있다.   

-> 결국 일괄처리시스템으로 진행하게됨  

##### 원형 대기 예방  
모든 자원에 숫자를 부여하고 숫자가 큰 방향으로만 자원을 할당 하는 것  

-> 유연성이 떨어진다  
-> 자원의 번호를 부여할 기준이 모호하다   

#### 교착 상태 회피  
##### 교착 상태 회피의 개념  
교착 상태가 발생하지 않는 범위 내에서만 자원을 할당하고
교착 상태가 발생하는 범위에 있으면 프로세스를 대기 시킨다  

자원의 총수와 현재 할당된 자원의 수를 기준으로 시스템을 **안정상태** 와 **불안정 상태**로 나누고  
시스템이 안정 상태를 유지하도록 자원 할당  
##### 은행원 알고리즘  
대출 금액이 대출 가능한 범위 내이면 허용되지만 그렇지 않으면 거부되는 것과 유사  
각 프로세스는 자신이 사용할 자원의 최대 수를 운영체제에게 알려준다  

**안정상태** : 각 프로세스의 기대 자원과 비교하여 가용 자원이 크거나 같은 경우가 한 번 이상인 경우를 말한다  

##### 교착상태 회피의 문제점  
* 프로세스가 자신이 사용할 모든 자원을 미리 선언해야한다  
* 시스템의 전체 자원 수가 고정적이어야 한다  
* 자원이 낭비된다  


#### 교착상태 검출  
##### 타임아웃을 이용한 교착 상태 검출  
:일정 시간동안 작업이 진행되지 않은 프로세스를 교착 상태가 발생한 것으로 간주하여 처리하는 방법  

-> 엉뚱한 프로세스가 강제 종료 될 수 있다  
-> 모든 시스템에 적용하기 어렵다  

* 타임아웃으로 데이터의 일관성이 깨지는 문제를 해결하기 위해  
**체크포인트**와 **롤백** 사용  
스냅숏 : 체크포이트를 설정하면 현재의 시스템 상태가 하드디스크에 저장되는데 이렇게 저장된 데이터  
롤백 : 작업을 하다가 문제가 발생하여 거의 체크포인트로 되돌아가는 것  

##### 자원 할당 그래프를 이용한 교착 상태 검출  
사이클의 유무로 교착 상태 검출  

-> 자원할당그래프를 유지, 갱신, 사이클을 검사하는 추가 작업으로 오버헤드가 발생  

#### 교착 상태 회복  
* 교착 상태를 일으킨 모든 프로세스를 동시에 종료  
* 교착 상태를 일으킨 프로세스 중 하나를 골라 순서대로 종료
  - 우선순위가 낮은 프로세스를 먼저종료
  - 같으면 작업 시간 짧은 순  
  - 자원을 많이 사용하는 프로세스부터 종료  

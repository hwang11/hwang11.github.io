---
title: JSP Ch9 클라이언트와의 대화 1 - 쿠키
description: JSP Ch9 클라이언트와의 대화 1 - 쿠키
categories:
 - JSP
tags:
---  
## 쿠키 사용하기  
**쿠키** : 웹 브라우저가 보관하고 있는 데이터  

웹 브라우저 -> 웹 서버 정보 전달 **파라미터** 사용  
웹 서버 -> 웹 브라우저 정보 전달 **쿠키** 사용  

#### 쿠키 동작 방식
1) **쿠키 생성** : JSP 프로그래밍에서 쿠키는 주로 웹 서버 측에서 생성  
2) **쿠키 저장** : 웹 브라우저는 응답 데이터에 포함된 쿠키를 쿠키 저장소에 보관한다 ( 웹 브라우저에 쿠키저장소가 있음)  
3) **쿠키 전송** : 웹 브라우저는 한번 저장된 쿠키를 매번 요청이 있을 때 마다 웹서버에 전송한다. 웹서버는 웹 브라우저가 전송한 쿠키를 사용해서 필요한 작업을 수행할 수 있다.  

### 쿠키의 구성  
* **이름** - 각각의 쿠키를 구별하는데 사용되는 이름  
* **값** - 쿠키의 이름과 관련된 값  
* **유효 시간** - 쿠키의 유지시간, 쿠키는 지속성을 갖고 있으며 얼마나 지속할 지의 여부를 지정할 수 있다.
* **도메인** - 쿠키를 전송할 도메인  
* **경로** - 쿠키를 전송할 요청 경로  

### 쿠키 생성  
```java
<%
  Cookie cookie = new Cookie("cookieName","cookieValue");
  response.addCookie(cookie); //response에 추가함.
%>
```  
response 기본 객체는 웹 브라우저에 쿠키 정보를 추가로 전송한다.  

### 쿠키 값 읽어오기  
```java
Cookie[] cookies = request.getCookies();
```

### 쿠키의 도메인  
* 기본적으로 쿠키는 그 쿠키를 생성한 서버에만 전송된다.  
* ```setDomain()``` 메서드 : 생성된 쿠키가 전송될 수 있는 도메인 지정  
  - *ex1)* .somehost.com - 점으로 시작하는 경우 관련 도메인에 모두 쿠키를 전송한다.  
  - *ex2)* www.somehost.com - 특정 도메인에 대해서만 쿠키를 전송  
  - ```setDomain()```값으로 현재 서버의 도메인 및 상위 도메인만 전달할 수 있다.   

### 쿠키의 경로  
* 여기서 말하는 경로는 URL에서 도메인 이후의 부분을 의미.  
* ```setDomain()``` 를 사용해서 쿠키의 경로를 지정하면, 그 쿠키는 지정한 경로 또는 *하위* 경로에 대해서만 쿠키를 전송  
* 대부분의 경우 쿠키의 경로를 "/"로 지정한다.  

### 쿠키의 유효 시간  
* **아이디 기억하기 기능의 구현 방법**  
사용자가 로그인에 성공하면 아이디를 값으로 저장하고 있는 쿠키의 유효기간을 1달 정도로 여유롭게 잡아 생성. 그러면 웹 브라우저를 닫아도 값이 남아있기 때문에 다음에 웹 브라우저를 열 때 아이디를 저장하고 있는 쿠키를 사용할 수 있다.  

### 쿠키와 헤더  
쿠키는 응답 헤더 형태로 웹 브라우저에 전달되기 때문에 쿠키 역시 출력 버퍼가 플러시 된 이후에는 새롭게 추가할 수 없다.  
